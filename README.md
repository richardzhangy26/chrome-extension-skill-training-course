# Polymas AI è®­ç»ƒåŠ©æ‰‹ - Chrome æ‰©å±•

åŸºäº React 19 + TypeScript + Vite 6 æ„å»ºçš„æµè§ˆå™¨æ‰©å±•ï¼Œç”¨äº Polymas æ•™å­¦å¹³å°çš„ AI èƒ½åŠ›è®­ç»ƒã€‚

## ğŸš€ å¿«é€Ÿä¸‹è½½

**ğŸ‘‰ [ç‚¹å‡»ä¸‹è½½æœ€æ–°ç‰ˆæœ¬ v0.5.0](https://github.com/richardzhangy26/chrome-extension-skill-training-course/releases/tag/v0.5.0)**

ä¸‹è½½ ZIP æ–‡ä»¶åï¼ŒæŒ‰ç…§ä¸‹æ–¹å®‰è£…æ­¥éª¤æ“ä½œå³å¯ä½¿ç”¨ã€‚

---

## ç›®å½•

- [å®‰è£…ä½¿ç”¨](#å®‰è£…ä½¿ç”¨)
- [ä½¿ç”¨æŒ‡å—](#ä½¿ç”¨æŒ‡å—)
- [å¼€å‘æŒ‡å—](#å¼€å‘æŒ‡å—)
- [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## å®‰è£…ä½¿ç”¨

### æ”¯æŒçš„æµè§ˆå™¨

| æµè§ˆå™¨ | æ”¯æŒæƒ…å†µ | è¯´æ˜ |
|--------|---------|------|
| Chrome | âœ… å®Œå…¨æ”¯æŒ | æ¨èä½¿ç”¨ |
| Edge | âœ… å…¼å®¹ | åŸºäº Chromium |
| Brave | âœ… å…¼å®¹ | åŸºäº Chromium |
| Firefox | âœ… æ”¯æŒ | éœ€å•ç‹¬æ„å»º |

### Chrome / Edge / Brave å®‰è£…æ­¥éª¤

1. [ä¸‹è½½ ZIP æ–‡ä»¶](https://github.com/richardzhangy26/chrome-extension-skill-training-course/releases/tag/v0.5.0)
2. è§£å‹ ZIP æ–‡ä»¶åˆ°ä»»æ„æ–‡ä»¶å¤¹
3. æ‰“å¼€æµè§ˆå™¨æ‰©å±•é¡µé¢ï¼š
   - Chrome: åœ°å€æ è¾“å…¥ `chrome://extensions`
   - Edge: åœ°å€æ è¾“å…¥ `edge://extensions`
   - Brave: åœ°å€æ è¾“å…¥ `brave://extensions`
4. å¼€å¯å³ä¸Šè§’çš„ **å¼€å‘è€…æ¨¡å¼**
5. ç‚¹å‡» **åŠ è½½å·²è§£å‹çš„æ‰©å±•ç¨‹åº**
6. é€‰æ‹©è§£å‹åçš„æ–‡ä»¶å¤¹
7. å®‰è£…æˆåŠŸåï¼Œå·¥å…·æ ä¼šå‡ºç°æ‰©å±•å›¾æ ‡

### Firefox å®‰è£…æ­¥éª¤

1. è·å– Firefox ç‰ˆæœ¬çš„æ‰©å±•æ–‡ä»¶
2. æ‰“å¼€ `about:debugging#/runtime/this-firefox`
3. ç‚¹å‡» **ä¸´æ—¶è½½å…¥é™„åŠ ç»„ä»¶**
4. é€‰æ‹©æ–‡ä»¶å¤¹ä¸­çš„ `manifest.json`

> âš ï¸ **æ³¨æ„**ï¼šFirefox ä¸´æ—¶åŠ è½½çš„æ‰©å±•ä¼šåœ¨æµè§ˆå™¨å…³é—­åæ¶ˆå¤±ï¼Œéœ€è¦æ¯æ¬¡å¯åŠ¨æµè§ˆå™¨æ—¶é‡æ–°åŠ è½½ã€‚

---

## ä½¿ç”¨æŒ‡å—

### ç¬¬ä¸€æ­¥ï¼šé…ç½® LLMï¼ˆå¿…é¡»ï¼‰

1. ç‚¹å‡»æ‰©å±•å›¾æ ‡ï¼Œæ‰“å¼€ä¾§è¾¹æ 
2. ç‚¹å‡»å³ä¸Šè§’çš„ **âš™ï¸ è®¾ç½®** æŒ‰é’®
3. åœ¨ã€ŒLLM é…ç½®ã€æ ‡ç­¾é¡µä¸­å¡«å†™ï¼š
   - **API Key**ï¼šä½ çš„è±†åŒ… API å¯†é’¥
   - **æ¨¡å‹**ï¼šé€‰æ‹©è¦ä½¿ç”¨çš„æ¨¡å‹ï¼ˆæ¨è Doubao Pro 32Kï¼‰
   - **Endpoint ID**ï¼šä½ çš„ç«¯ç‚¹ ID
   - **æœåŠ¡ä»£ç **ï¼šæœåŠ¡ä»£ç ï¼ˆå¯é€‰ï¼‰
4. ç‚¹å‡»ã€Œæµ‹è¯•è¿æ¥ã€ç¡®è®¤é…ç½®æ­£ç¡®
5. ç‚¹å‡»ã€Œä¿å­˜é…ç½®ã€

### ç¬¬äºŒæ­¥ï¼šå¼€å§‹è®­ç»ƒ

1. è®¿é—® Polymas æ•™å­¦å¹³å°çš„è®­ç»ƒé¡µé¢ï¼ˆURL ä¸­éœ€åŒ…å« `trainTaskId` å‚æ•°ï¼‰
2. æ‰“å¼€æ‰©å±•ä¾§è¾¹æ 
3. æ‰©å±•ä¼šè‡ªåŠ¨è¯†åˆ«è®­ç»ƒä»»åŠ¡ ID
4. ç‚¹å‡» **ã€Œå¼€å§‹è®­ç»ƒã€** æŒ‰é’®
5. ç³»ç»Ÿä¼šè‡ªåŠ¨è·å–è®­ç»ƒæ­¥éª¤å¹¶å¼€å§‹å¯¹è¯

### ç¬¬ä¸‰æ­¥ï¼šå¯¹è¯äº¤äº’

è®­ç»ƒå¼€å§‹åï¼Œä½ å¯ä»¥ï¼š

| æ“ä½œ | è¯´æ˜ |
|------|------|
| **æ‰‹åŠ¨è¾“å…¥** | åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥å›å¤ï¼Œç‚¹å‡»å‘é€ |
| **AI è‡ªåŠ¨ç”Ÿæˆ** | ç‚¹å‡» âœ¨ æŒ‰é’®ï¼ŒAI æ ¹æ®å­¦ç”Ÿæ¡£ä½è‡ªåŠ¨ç”Ÿæˆå›å¤ |
| **è¿ç»­è‡ªåŠ¨å¯¹è¯** | ç‚¹å‡» ğŸ”„ æŒ‰é’®ï¼Œå¼€å¯è‡ªåŠ¨å¯¹è¯æ¨¡å¼ |

### ç¬¬å››æ­¥ï¼šè‡ªå®šä¹‰å­¦ç”Ÿæ¡£ä½ï¼ˆå¯é€‰ï¼‰

1. æ‰“å¼€è®¾ç½® â†’ ã€Œç”¨æˆ·è§’è‰²ã€æ ‡ç­¾é¡µ
2. å¯ä»¥é€‰æ‹©é¢„è®¾çš„å­¦ç”Ÿæ¡£ä½ï¼š
   - **ä¼˜ç§€å­¦ç”Ÿ**ï¼šç†è§£é€å½»ã€è¡¨è¾¾æ¸…æ™°
   - **éœ€è¦å¼•å¯¼çš„å­¦ç”Ÿ**ï¼šåŸºæœ¬ç†è§£ä½†ä¸å¤Ÿå…¨é¢
   - **ç­”éæ‰€é—®çš„å­¦ç”Ÿ**ï¼šç†è§£åå·®ã€å®¹æ˜“è·‘é¢˜
3. ä¹Ÿå¯ä»¥ç‚¹å‡»ã€Œæ·»åŠ æ¡£ä½ã€åˆ›å»ºè‡ªå®šä¹‰è§’è‰²
4. ç¼–è¾‘æ¡£ä½çš„åç§°ã€è§’è‰²ç‰¹å¾ã€è¡¨è¾¾é£æ ¼
5. ç‚¹å‡»ã€Œä¿å­˜é…ç½®ã€

### ç¬¬äº”æ­¥ï¼šè‡ªå®šä¹‰ç³»ç»Ÿæç¤ºè¯ï¼ˆå¯é€‰ï¼‰

1. æ‰“å¼€è®¾ç½® â†’ ã€Œç³»ç»Ÿæç¤ºè¯ã€æ ‡ç­¾é¡µ
2. é€‰æ‹©ã€Œè‡ªå®šä¹‰æ¨¡å¼ã€
3. ç¼–è¾‘ç³»ç»Ÿæç¤ºè¯å†…å®¹
4. ç‚¹å‡»ã€Œä¿å­˜é…ç½®ã€

---

## å¼€å‘æŒ‡å—

### ç¯å¢ƒè¦æ±‚

- **Node.js**: >= 22.15.1ï¼ˆæŸ¥çœ‹ `.nvmrc`ï¼‰
- **åŒ…ç®¡ç†å™¨**: pnpm 10.11.0+
- **Windows ç”¨æˆ·**: å¿…é¡»åœ¨ WSL ç¯å¢ƒä¸‹è¿è¡Œ

### å®‰è£…ä¾èµ–

```bash
# å…¨å±€å®‰è£… pnpmï¼ˆå¦‚æœæ²¡æœ‰ï¼‰
npm install -g pnpm

# å®‰è£…é¡¹ç›®ä¾èµ–
pnpm install
```

### å¼€å‘å‘½ä»¤

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆæ”¯æŒçƒ­æ›´æ–°ï¼‰
pnpm dev              # Chrome ç‰ˆæœ¬
pnpm dev:firefox      # Firefox ç‰ˆæœ¬

# ç”Ÿäº§æ„å»º
pnpm build            # Chrome ç‰ˆæœ¬
pnpm build:firefox    # Firefox ç‰ˆæœ¬

# æ‰“åŒ… ZIP
pnpm zip              # Chrome ç‰ˆæœ¬
pnpm zip:firefox      # Firefox ç‰ˆæœ¬
```

### ä»£ç æ£€æŸ¥

```bash
pnpm type-check       # TypeScript ç±»å‹æ£€æŸ¥
pnpm lint             # ESLint æ£€æŸ¥
pnpm lint:fix         # è‡ªåŠ¨ä¿®å¤ ESLint é—®é¢˜
pnpm format           # Prettier æ ¼å¼åŒ–
```

### æ·»åŠ ä¾èµ–

```bash
# åœ¨æ ¹ç›®å½•æ·»åŠ ä¾èµ–
pnpm i <package> -w

# ä¸ºç‰¹å®šæ¨¡å—æ·»åŠ ä¾èµ–ï¼ˆå¦‚ side-panelï¼‰
pnpm i <package> -F side-panel
```

### æ¸…ç†é¡¹ç›®

```bash
pnpm clean            # æ¸…ç† distã€node_modulesã€turbo ç¼“å­˜
pnpm clean:install    # æ¸…ç†åé‡æ–°å®‰è£…
```

---

## é¡¹ç›®ç»“æ„

```
â”œâ”€â”€ chrome-extension/     # æ‰©å±•é…ç½®
â”‚   â”œâ”€â”€ manifest.ts       # ç”Ÿæˆ manifest.jsonï¼ˆä¿®æ”¹è¿™é‡Œï¼Œä¸è¦ç›´æ¥æ”¹ manifest.jsonï¼‰
â”‚   â”œâ”€â”€ src/background/   # åå°æœåŠ¡è„šæœ¬
â”‚   â””â”€â”€ public/           # å›¾æ ‡ç­‰é™æ€èµ„æº
â”‚
â”œâ”€â”€ pages/                # æ‰©å±•é¡µé¢ï¼ˆæ¯ä¸ªæ˜¯ç‹¬ç«‹å…¥å£ï¼‰
â”‚   â”œâ”€â”€ side-panel/       # ä¾§è¾¹æ ï¼ˆä¸»è¦èŠå¤©ç•Œé¢ï¼‰
â”‚   â”œâ”€â”€ popup/            # å·¥å…·æ å¼¹çª—
â”‚   â”œâ”€â”€ options/          # è®¾ç½®é¡µé¢
â”‚   â”œâ”€â”€ content/          # æ³¨å…¥é¡µé¢çš„è„šæœ¬
â”‚   â””â”€â”€ content-ui/       # æ³¨å…¥é¡µé¢çš„ React ç»„ä»¶
â”‚
â””â”€â”€ packages/             # å…±äº«åº“
    â”œâ”€â”€ storage/          # Chrome å­˜å‚¨å°è£…
    â”œâ”€â”€ shared/           # å…±äº«ç±»å‹ã€å¸¸é‡ã€å·¥å…·å‡½æ•°
    â”œâ”€â”€ ui/               # å¯å¤ç”¨ React ç»„ä»¶
    â””â”€â”€ i18n/             # å›½é™…åŒ–
```

### å…³é”®æ–‡ä»¶è¯´æ˜

| æ–‡ä»¶/ç›®å½• | è¯´æ˜ |
|-----------|------|
| `chrome-extension/manifest.ts` | æ‰©å±•æ¸…å•é…ç½®ï¼Œ**ä¸è¦ç›´æ¥ç¼–è¾‘ manifest.json** |
| `pages/side-panel/` | ä¸»è¦çš„ AI èŠå¤©ç•Œé¢ |
| `chrome-extension/src/background/` | åå°æœåŠ¡ï¼Œå¤„ç†è®¤è¯å’Œ API è¯·æ±‚ |
| `packages/storage/lib/impl/` | å­˜å‚¨æ¨¡å—ï¼Œæ–°æ¨¡å—éœ€åœ¨ `index.ts` ä¸­å¯¼å‡º |

---

## å¸¸è§é—®é¢˜

### çƒ­æ›´æ–°å¡ä½äº†

1. æŒ‰ `Ctrl+C` åœæ­¢å¼€å‘æœåŠ¡å™¨ï¼Œç„¶åé‡æ–°è¿è¡Œ `pnpm dev`
2. å¦‚æœé‡åˆ° `grpc` é”™è¯¯ï¼Œå…ˆæ€æ‰ `turbo` è¿›ç¨‹å†é‡æ–°è¿è¡Œ

### å¯¼å…¥è·¯å¾„æŠ¥é”™

ä½¿ç”¨ `@extension/` å‰ç¼€å¯¼å…¥å…±äº«åŒ…ï¼Œä¾‹å¦‚ï¼š
```typescript
import { someUtil } from '@extension/shared';
import { storage } from '@extension/storage';
```

### Windows ä¸‹è¿è¡Œå¤±è´¥

å¿…é¡»åœ¨ WSL ç¯å¢ƒä¸‹è¿è¡Œï¼Œå¹¶ä¸” `pnpm dev` éœ€è¦ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œã€‚

### è°ƒè¯•æ–¹æ³•

| ç»„ä»¶ | è°ƒè¯•æ–¹å¼ |
|------|----------|
| ä¾§è¾¹æ  | å³é”®ä¾§è¾¹æ  â†’ æ£€æŸ¥ |
| åå°è„šæœ¬ | `chrome://extensions` â†’ ç‚¹å‡»æ‰©å±•çš„ "service worker" |
| å†…å®¹è„šæœ¬ | æ‰“å¼€é¡µé¢çš„å¼€å‘è€…å·¥å…· â†’ æ§åˆ¶å° |
| å¼¹çª— | å³é”®æ‰©å±•å›¾æ ‡ â†’ æ£€æŸ¥å¼¹å‡ºå†…å®¹ |

---

## ç‰ˆæœ¬æ›´æ–°

```bash
pnpm update-version <version>    # æ›´æ–°æ‰©å±•ç‰ˆæœ¬å·
```

---

## å‚è€ƒèµ„æ–™

- [Chrome Extensions æ–‡æ¡£](https://developer.chrome.com/docs/extensions)
- [Vite æ–‡æ¡£](https://vitejs.dev/)
- [Turborepo æ–‡æ¡£](https://turbo.build/repo/docs)
